<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Access to word predictability using large language (transformer) models in R.
">
<title>Access to Large Language Model Predictions in R • pangoling</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Access to Large Language Model Predictions in R">
<meta property="og:description" content="Access to word predictability using large language (transformer) models in R.
">
<meta property="og:image" content="http://bruno.nicenboim.me/pangoling/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script>if(!sessionStorage.getItem("_swa")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:document.referrer,screen:screen.width+"x"+screen.height,user:"bnicenboim",utcoffset:"1"}))};sessionStorage.setItem("_swa","1");</script>
</head>
<body>
<p>,<script data-goatcounter="https://bnicenboim.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">pangoling</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9005</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/intro-gpt2.html">Introduction: Using a GPT2 transformer model to get word predictability</a>
    <a class="dropdown-item" href="articles/intro-bert.html">An alternative: Using a Bert transformer model to get the predictability of words in a context</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bnicenboim/pangoling/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="pangoling-">pangoling 
<a class="anchor" aria-label="anchor" href="#pangoling-"></a>
</h1>
</div>
<!-- badges: start -->

<p><code>pangoling</code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The logo of the package was created with &lt;a href="https://huggingface.co/spaces/stabilityai/stable-diffusion" class="external-link"&gt;stable diffusion&lt;/a&gt; and the R package &lt;a href="https://github.com/GuangchuangYu/hexSticker" class="external-link"&gt;hexSticker&lt;/a&gt;.&lt;/p&gt;'><sup>1</sup></a> is an R package for estimating the log-probabilities of words in a given context using transformer models. The package provides an interface for utilizing pre-trained transformer models (such as GPT-2 or BERT) to obtain word probabilities. These log-probabilities are often utilized as predictors in psycholinguistic studies. This package can be useful for researchers in the field of psycholinguistics who want to leverage the power of transformer models in their work.</p>
<p>The package is mostly a wrapper of the python package <a href="https://pypi.org/project/transformers/" class="external-link"><code>transformers</code></a> to process data in a convenient format.</p>
<div class="section level2">
<h2 id="important-limitations-and-bias">Important! Limitations and bias<a class="anchor" aria-label="anchor" href="#important-limitations-and-bias"></a>
</h2>
<p>The training data of the most popular models (such as GPT-2) haven’t been released, so one cannot inspect it. It’s clear that the data contain a lot of unfiltered content from the internet, which is far from neutral. See for example the scope in the <a href="https://github.com/openai/gpt-2/blob/master/model_card.md#out-of-scope-use-cases" class="external-link">openAI team’s model card for GPT-2</a>, but it should be the same for many other models, and the <a href="https://huggingface.co/gpt2" class="external-link">limitations and bias section of GPT-2 in Hugging Face website</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>There is still no released version of <code>pangoling</code>. The package is in the ** early** stages of development, and it will probably be subject to changes. To install the latest version from github use:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes") # if needed</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"bnicenboim/pangoling"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example which shows you how to get log-probabilities of words in a dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bruno.nicenboim.me/pangoling" class="external-link">pangoling</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/markfairbanks/tidytable" class="external-link">tidytable</a></span><span class="op">)</span> <span class="co">#fast alternative to dplyr</span></span></code></pre></div>
<p>Given a (toy) dataset where sentences are organized with one word or short phrase in each row:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sentences</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"The apple doesn't fall far from the tree."</span>, </span>
<span>               <span class="st">"Don't judge a book by its cover."</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">df_sent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sentences</span>, split <span class="op">=</span> <span class="st">" "</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytable/man/map.html" class="external-link">map_dfr</a></span><span class="op">(</span>.f <span class="op">=</span>  <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>word <span class="op">=</span> <span class="va">.x</span><span class="op">)</span>, .id <span class="op">=</span> <span class="st">"sent_n"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tidytable: 15 × 2</span></span>
<span><span class="co">#&gt;    sent_n word   </span></span>
<span><span class="co">#&gt;     &lt;int&gt; &lt;chr&gt;  </span></span>
<span><span class="co">#&gt;  1      1 The    </span></span>
<span><span class="co">#&gt;  2      1 apple  </span></span>
<span><span class="co">#&gt;  3      1 doesn't</span></span>
<span><span class="co">#&gt;  4      1 fall   </span></span>
<span><span class="co">#&gt;  5      1 far    </span></span>
<span><span class="co">#&gt;  6      1 from   </span></span>
<span><span class="co">#&gt;  7      1 the    </span></span>
<span><span class="co">#&gt;  8      1 tree.  </span></span>
<span><span class="co">#&gt;  9      2 Don't  </span></span>
<span><span class="co">#&gt; 10      2 judge  </span></span>
<span><span class="co">#&gt; 11      2 a      </span></span>
<span><span class="co">#&gt; 12      2 book   </span></span>
<span><span class="co">#&gt; 13      2 by     </span></span>
<span><span class="co">#&gt; 14      2 its    </span></span>
<span><span class="co">#&gt; 15      2 cover.</span></span></code></pre></div>
<p>One can get the log-transformed probability of each word based on GPT-2 as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_sent</span> <span class="op">&lt;-</span> <span class="va">df_sent</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytable/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lp <span class="op">=</span> <span class="fu"><a href="reference/causal_lp.html">causal_lp</a></span><span class="op">(</span><span class="va">word</span>, .by <span class="op">=</span> <span class="va">sent_n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Processing using causal model 'gpt2'...</span></span>
<span><span class="co">#&gt; Processing 1 batch(es) of 10 tokens.</span></span>
<span><span class="co">#&gt; Text id: 1</span></span>
<span><span class="co">#&gt; `The apple doesn't fall far from the tree.`</span></span>
<span><span class="co">#&gt; Processing 1 batch(es) of 9 tokens.</span></span>
<span><span class="co">#&gt; Text id: 2</span></span>
<span><span class="co">#&gt; `Don't judge a book by its cover.`</span></span>
<span><span class="va">df_sent</span></span>
<span><span class="co">#&gt; # A tidytable: 15 × 3</span></span>
<span><span class="co">#&gt;    sent_n word         lp</span></span>
<span><span class="co">#&gt;     &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1      1 The      NA    </span></span>
<span><span class="co">#&gt;  2      1 apple   -10.9  </span></span>
<span><span class="co">#&gt;  3      1 doesn't  -5.50 </span></span>
<span><span class="co">#&gt;  4      1 fall     -3.60 </span></span>
<span><span class="co">#&gt;  5      1 far      -2.91 </span></span>
<span><span class="co">#&gt;  6      1 from     -0.745</span></span>
<span><span class="co">#&gt;  7      1 the      -0.207</span></span>
<span><span class="co">#&gt;  8      1 tree.    -1.58 </span></span>
<span><span class="co">#&gt;  9      2 Don't    NA    </span></span>
<span><span class="co">#&gt; 10      2 judge    -6.27 </span></span>
<span><span class="co">#&gt; 11      2 a        -2.33 </span></span>
<span><span class="co">#&gt; 12      2 book     -1.97 </span></span>
<span><span class="co">#&gt; 13      2 by       -0.409</span></span>
<span><span class="co">#&gt; 14      2 its      -0.257</span></span>
<span><span class="co">#&gt; 15      2 cover.   -1.38</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="how-to-cite">How to cite<a class="anchor" aria-label="anchor" href="#how-to-cite"></a>
</h2>
<blockquote>
<p>Nicenboim B (2023). <em>pangoling: Access to language model predictions in R</em>. R package version 0.0.0.9005, DOI: <a href="https://zenodo.org/badge/latestdoi/497831295" class="external-link">10.5281/zenodo.7637526</a>, <a href="https://github.com/bnicenboim/pangoling" class="external-link uri">https://github.com/bnicenboim/pangoling</a>.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that this package is released with a <a href="https://ropensci.org/code-of-conduct/" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
<p>Another R package that act as a wrapper for <a href="https://pypi.org/project/transformers/" class="external-link"><code>transformers</code></a> is <a href="https://r-text.org//" class="external-link"><code>text</code></a> However, <code>text</code> is more general, and its focus is on Natural Language Processing and Machine Learning.</p>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/bnicenboim/pangoling/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/bnicenboim/pangoling/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing pangoling</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://bruno.nicenboim.me/" class="external-link">Bruno Nicenboim</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5176-3943" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://app.codecov.io/gh/bnicenboim/pangoling?branch=main" class="external-link"><img src="https://codecov.io/gh/bnicenboim/pangoling/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/bnicenboim/pangoling/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/bnicenboim/pangoling/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://www.repostatus.org/#wip" class="external-link"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/497831295" class="external-link"><img src="https://zenodo.org/badge/497831295.svg" alt="DOI"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://bruno.nicenboim.me/" class="external-link">Bruno Nicenboim</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  
</body>
</html>

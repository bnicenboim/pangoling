<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pangoling">
<title>Troubleshooting the use of Python in R • pangoling</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Troubleshooting the use of Python in R">
<meta property="og:description" content="pangoling">
<meta property="og:image" content="http://bruno.nicenboim.me/pangoling/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script>if(!sessionStorage.getItem("_swa")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:document.referrer,screen:screen.width+"x"+screen.height,user:"bnicenboim",utcoffset:"1"}))};sessionStorage.setItem("_swa","1");</script>
</head>
<body>
<p>,<script data-goatcounter="https://bnicenboim.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pangoling</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9009</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro-gpt2.html">Introduction: Using a GPT2 transformer model to get word predictability</a>
    <a class="dropdown-item" href="../articles/intro-bert.html">An alternative: Using a Bert transformer model to get the predictability of words in a context</a>
    <a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting the use of Python in R</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bnicenboim/pangoling/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Troubleshooting the use of Python in R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bnicenboim/pangoling/blob/HEAD/vignettes/articles/troubleshooting.Rmd" class="external-link"><code>vignettes/articles/troubleshooting.Rmd</code></a></small>
      <div class="d-none name"><code>troubleshooting.Rmd</code></div>
    </div>

    
    
<p>This vignette provides guidance on troubleshooting issues related to
Python module dependencies when using R.</p>
<div class="section level2">
<h2 id="module-not-found-error-in-rstudio">Module not found error in Rstudio<a class="anchor" aria-label="anchor" href="#module-not-found-error-in-rstudio"></a>
</h2>
<p>You might encounter an error message similar to this:</p>
<pre><code>Error in py_run_string_impl(code, local, convert) : 
  ModuleNotFoundError: No module named 'torch'
Run `reticulate::py_last_error()` for details.</code></pre>
<p><code>pangoling</code> (as many other R packages) relies on
<code>reticulate</code> for Python functionality. Even if the package
installation seems successful, the issue may be that
<code>reticulate</code> is not correctly loading the correct Python
environment. By default, R should use the a <em>conda</em> environment
named <code>r-reticulate</code> when managing these configurations
automatically.</p>
<p>One can verify this by using <code>py_config</code>, this is the
output in a linux computer where the conda environment wasn’t
loaded:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_config.html" class="external-link">py_config</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; python:         /usr/local/bin/python</span></span>
<span><span class="co">#&gt; libpython:      /usr/lib/python3.10/config-3.10-x86_64-linux-gnu/libpython3.10.so</span></span>
<span><span class="co">#&gt; pythonhome:     //usr://usr</span></span>
<span><span class="co">#&gt; version:        3.10.12 (main, Jun 11 2023, 05:26:28) [GCC 11.4.0]</span></span>
<span><span class="co">#&gt; numpy:           [NOT FOUND]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; NOTE: Python version was forced by RETICULATE_PYTHON_FALLBACK</span></span></code></pre></div>
<p>One can anyways configure RStudio to load the correct conda
environment (<code>r-reticulate</code>) by default following these
steps:</p>
<ol style="list-style-type: decimal">
<li><p>In RStudio, navigate to the “Tools” menu.</p></li>
<li><p>Click on “Global Options” in the “Tools” menu.</p></li>
<li><p>Click on Python.</p></li>
</ol>
<p><img src="python.png" width="524"></p>
<ol start="4" style="list-style-type: decimal">
<li><p>Click on Select…</p></li>
<li><p>Click on the Conda Enviornment tab.</p></li>
<li><p>Click on the r-reticulate path.</p></li>
</ol>
<p><img src="conda.png" width="524"></p>
<ol start="7" style="list-style-type: decimal">
<li>Click on the Select button on the bottom.</li>
</ol>
<p>The path that was selected should appear now when using
<code><a href="https://rstudio.github.io/reticulate/reference/py_config.html" class="external-link">py_config()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_config.html" class="external-link">py_config</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; python:         /home/runner/.virtualenvs/r-reticulate/bin/python</span></span>
<span><span class="co">#&gt; libpython:      /opt/hostedtoolcache/Python/3.9.18/x64/lib/libpython3.9.so</span></span>
<span><span class="co">#&gt; pythonhome:     /home/runner/.virtualenvs/r-reticulate:/home/runner/.virtualenvs/r-reticulate</span></span>
<span><span class="co">#&gt; version:        3.9.18 (main, Aug 28 2023, 08:38:32)  [GCC 11.4.0]</span></span>
<span><span class="co">#&gt; numpy:          /home/runner/.virtualenvs/r-reticulate/lib/python3.9/site-packages/numpy</span></span>
<span><span class="co">#&gt; numpy_version:  1.26.1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; NOTE: Python version was forced by RETICULATE_PYTHON</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="httpsconnectionpool-error">HTTPSConnectionPool error<a class="anchor" aria-label="anchor" href="#httpsconnectionpool-error"></a>
</h2>
<p>A <code>causal_</code> or <code>masked_</code> commands throws an
error that starts as follows:</p>
<pre><code>Error in py_run_string_impl(code, local, convert) :
requests.exceptions.SSLError: HTTPSConnectionPool(host='huggingface.co', port=443): </code></pre>
<p>The first time a model is run, it will download some files that will
be available for subsequent runs. So if there is no internet connection
(or the huggingface website is down) during the first run, one will
experience this problem. Afterwards, it is possible to use
<code>pangoling</code> without an internet connection.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://bruno.nicenboim.me/" class="external-link">Bruno Nicenboim</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  
</body>
</html>
